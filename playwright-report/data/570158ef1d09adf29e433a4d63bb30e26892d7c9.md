# Test info

- Name: Authentication System >> should load the main application
- Location: /var/www2/tests/auth.spec.js:19:3

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: locator('#app')
Expected: visible
Received: hidden
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for locator('#app')
    9 × locator resolved to <div id="app"></div>
      - unexpected value "hidden"

    at /var/www2/tests/auth.spec.js:24:40
```

# Test source

```ts
   1 | const { test, expect } = require('@playwright/test');
   2 |
   3 | // Test configuration
   4 | const BASE_URL = 'http://localhost:3000';
   5 | const TEST_USER = {
   6 |   email: 'playwright@example.com',
   7 |   password: 'test123456',
   8 |   firstName: 'Playwright',
   9 |   lastName: 'User'
   10 | };
   11 |
   12 | test.describe('Authentication System', () => {
   13 |   
   14 |   test.beforeAll(async ({ request }) => {
   15 |     // Clean up any existing test user
   16 |     await request.post(`${BASE_URL}/api/auth/logout`).catch(() => {});
   17 |   });
   18 |
   19 |   test('should load the main application', async ({ page }) => {
   20 |     await page.goto('/');
   21 |     await expect(page).toHaveTitle(/React.js Boilerplate/);
   22 |     
   23 |     // Check if the app has loaded properly
>  24 |     await expect(page.locator('#app')).toBeVisible();
      |                                        ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
   25 |     
   26 |     // Should see navigation with language flags
   27 |     await expect(page.locator('nav')).toBeVisible();
   28 |     
   29 |     // Should see language flags
   30 |     await expect(page.locator('img[alt*="English"], img[alt*="Español"], img[alt*="Deutsch"]')).toHaveCount(3);
   31 |   });
   32 |
   33 |   test('API Health Check', async ({ request }) => {
   34 |     const response = await request.get(`${BASE_URL}/api/health`);
   35 |     expect(response.ok()).toBeTruthy();
   36 |     
   37 |     const data = await response.json();
   38 |     expect(data.status).toBe('OK');
   39 |     expect(data.timestamp).toBeDefined();
   40 |   });
   41 |
   42 |   test('Authentication endpoints without token should fail', async ({ request }) => {
   43 |     const response = await request.get(`${BASE_URL}/api/auth/me`);
   44 |     expect(response.status()).toBe(401);
   45 |     
   46 |     const data = await response.json();
   47 |     expect(data.success).toBe(false);
   48 |     expect(data.message).toContain('token');
   49 |   });
   50 |
   51 |   test('User Registration Flow', async ({ request }) => {
   52 |     // Register new user
   53 |     const registerResponse = await request.post(`${BASE_URL}/api/auth/register`, {
   54 |       data: TEST_USER
   55 |     });
   56 |     
   57 |     expect(registerResponse.status()).toBe(201);
   58 |     
   59 |     const registerData = await registerResponse.json();
   60 |     expect(registerData.success).toBe(true);
   61 |     expect(registerData.user.email).toBe(TEST_USER.email);
   62 |     expect(registerData.user.firstName).toBe(TEST_USER.firstName);
   63 |     expect(registerData.user.lastName).toBe(TEST_USER.lastName);
   64 |     expect(registerData.user.role).toBe('user');
   65 |     expect(registerData.tokens.accessToken).toBeDefined();
   66 |     expect(registerData.tokens.refreshToken).toBeDefined();
   67 |   });
   68 |
   69 |   test('User Login Flow', async ({ request }) => {
   70 |     // Login with the registered user
   71 |     const loginResponse = await request.post(`${BASE_URL}/api/auth/login`, {
   72 |       data: {
   73 |         email: TEST_USER.email,
   74 |         password: TEST_USER.password
   75 |       }
   76 |     });
   77 |     
   78 |     expect(loginResponse.status()).toBe(200);
   79 |     
   80 |     const loginData = await loginResponse.json();
   81 |     expect(loginData.success).toBe(true);
   82 |     expect(loginData.user.email).toBe(TEST_USER.email);
   83 |     expect(loginData.tokens.accessToken).toBeDefined();
   84 |     expect(loginData.tokens.refreshToken).toBeDefined();
   85 |   });
   86 |
   87 |   test('Invalid Login Credentials', async ({ request }) => {
   88 |     const response = await request.post(`${BASE_URL}/api/auth/login`, {
   89 |       data: {
   90 |         email: TEST_USER.email,
   91 |         password: 'wrongpassword'
   92 |       }
   93 |     });
   94 |     
   95 |     expect(response.status()).toBe(400);
   96 |     
   97 |     const data = await response.json();
   98 |     expect(data.success).toBe(false);
   99 |     expect(data.message).toContain('Invalid email or password');
  100 |   });
  101 |
  102 |   test('Authenticated User Profile Access', async ({ request }) => {
  103 |     // First login to get tokens
  104 |     const loginResponse = await request.post(`${BASE_URL}/api/auth/login`, {
  105 |       data: {
  106 |         email: TEST_USER.email,
  107 |         password: TEST_USER.password
  108 |       }
  109 |     });
  110 |     
  111 |     const loginData = await loginResponse.json();
  112 |     const accessToken = loginData.tokens.accessToken;
  113 |     
  114 |     // Access protected endpoint with token
  115 |     const profileResponse = await request.get(`${BASE_URL}/api/auth/me`, {
  116 |       headers: {
  117 |         'Authorization': `Bearer ${accessToken}`
  118 |       }
  119 |     });
  120 |     
  121 |     expect(profileResponse.status()).toBe(200);
  122 |     
  123 |     const profileData = await profileResponse.json();
  124 |     expect(profileData.success).toBe(true);
```