# Test info

- Name: Authentication System >> Responsive Navigation
- Location: /var/www2/tests/auth.spec.js:227:3

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: locator('nav ul')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for locator('nav ul')

    at /var/www2/tests/auth.spec.js:233:42
```

# Test source

```ts
  133 |         email: TEST_USER.email,
  134 |         password: TEST_USER.password
  135 |       }
  136 |     });
  137 |     
  138 |     const loginData = await loginResponse.json();
  139 |     const refreshToken = loginData.tokens.refreshToken;
  140 |     
  141 |     // Refresh the token
  142 |     const refreshResponse = await request.post(`${BASE_URL}/api/auth/refresh`, {
  143 |       data: {
  144 |         refreshToken: refreshToken
  145 |       }
  146 |     });
  147 |     
  148 |     expect(refreshResponse.status()).toBe(200);
  149 |     
  150 |     const refreshData = await refreshResponse.json();
  151 |     expect(refreshData.success).toBe(true);
  152 |     expect(refreshData.tokens.accessToken).toBeDefined();
  153 |     expect(refreshData.tokens.refreshToken).toBeDefined();
  154 |     // Tokens should be different from original
  155 |     expect(refreshData.tokens.accessToken).not.toBe(loginData.tokens.accessToken);
  156 |   });
  157 |
  158 |   test('Admin User Management Access', async ({ request }) => {
  159 |     // Try to access admin endpoints as regular user
  160 |     const loginResponse = await request.post(`${BASE_URL}/api/auth/login`, {
  161 |       data: {
  162 |         email: TEST_USER.email,
  163 |         password: TEST_USER.password
  164 |       }
  165 |     });
  166 |     
  167 |     const loginData = await loginResponse.json();
  168 |     const accessToken = loginData.tokens.accessToken;
  169 |     
  170 |     // Try to access admin-only endpoint
  171 |     const usersResponse = await request.get(`${BASE_URL}/api/users`, {
  172 |       headers: {
  173 |         'Authorization': `Bearer ${accessToken}`
  174 |       }
  175 |     });
  176 |     
  177 |     expect(usersResponse.status()).toBe(403);
  178 |     
  179 |     const usersData = await usersResponse.json();
  180 |     expect(usersData.success).toBe(false);
  181 |     expect(usersData.message).toContain('permissions');
  182 |   });
  183 |
  184 |   test('Contact Form API', async ({ request }) => {
  185 |     const contactData = {
  186 |       name: 'Test User',
  187 |       email: 'test@example.com',
  188 |       message: 'This is a test message from Playwright'
  189 |     };
  190 |     
  191 |     const response = await request.post(`${BASE_URL}/api/contact`, {
  192 |       data: contactData
  193 |     });
  194 |     
  195 |     expect(response.status()).toBe(200);
  196 |     
  197 |     const data = await response.json();
  198 |     expect(data.success).toBe(true);
  199 |     expect(data.message).toContain('sent successfully');
  200 |   });
  201 |
  202 |   test('Language Selector Functionality', async ({ page }) => {
  203 |     await page.goto('/');
  204 |     
  205 |     // Wait for page to load
  206 |     await page.waitForLoadState('networkidle');
  207 |     
  208 |     // Check if language flags are present
  209 |     const flags = page.locator('button img[src*="flag-"]');
  210 |     await expect(flags).toHaveCount(3);
  211 |     
  212 |     // Check if flags are clickable
  213 |     const usFlag = page.locator('button img[src*="flag-us"]').first();
  214 |     await expect(usFlag).toBeVisible();
  215 |     
  216 |     const esFlag = page.locator('button img[src*="flag-es"]').first();
  217 |     await expect(esFlag).toBeVisible();
  218 |     
  219 |     const deFlag = page.locator('button img[src*="flag-de"]').first();
  220 |     await expect(deFlag).toBeVisible();
  221 |     
  222 |     // Test clicking language flags (should not cause errors)
  223 |     await esFlag.click();
  224 |     await usFlag.click();
  225 |   });
  226 |
  227 |   test('Responsive Navigation', async ({ page }) => {
  228 |     // Test desktop navigation
  229 |     await page.goto('/');
  230 |     await page.setViewportSize({ width: 1200, height: 800 });
  231 |     
  232 |     // Should see full navigation menu
> 233 |     await expect(page.locator('nav ul')).toBeVisible();
      |                                          ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  234 |     
  235 |     // Test mobile navigation
  236 |     await page.setViewportSize({ width: 375, height: 667 });
  237 |     
  238 |     // Should see hamburger menu
  239 |     await expect(page.locator('button[aria-expanded]')).toBeVisible();
  240 |     
  241 |     // Click hamburger menu
  242 |     const hamburger = page.locator('button').filter({ hasText: /menu|â˜°/ }).or(
  243 |       page.locator('button:has(span)').filter({ hasNotText: /\w/ }).first()
  244 |     );
  245 |     
  246 |     if (await hamburger.count() > 0) {
  247 |       await hamburger.click();
  248 |       
  249 |       // Mobile menu should appear
  250 |       await expect(page.locator('nav ul')).toBeVisible();
  251 |     }
  252 |   });
  253 |
  254 |   test.afterAll(async ({ request }) => {
  255 |     // Clean up test user
  256 |     try {
  257 |       const loginResponse = await request.post(`${BASE_URL}/api/auth/login`, {
  258 |         data: {
  259 |           email: TEST_USER.email,
  260 |           password: TEST_USER.password
  261 |         }
  262 |       });
  263 |       
  264 |       if (loginResponse.ok()) {
  265 |         await request.post(`${BASE_URL}/api/auth/logout`);
  266 |       }
  267 |     } catch (error) {
  268 |       // Ignore cleanup errors
  269 |     }
  270 |   });
  271 | });
```